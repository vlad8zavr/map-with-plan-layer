<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
    <title>secondTry</title>
    <!-- <script src="http://api-maps.yandex.ru/1.1/index.xml?key=464ee1fd-a25c-4951-8f40-23c294e30f96" type="text/javascript"></script> -->
	<script src="https://api-maps.yandex.ru/2.1/?apikey=464ee1fd-a25c-4951-8f40-23c294e30f96&lang=ru_RU" type="text/javascript"></script>
    <script type="text/javascript">

        ymaps.ready(function () {
            console.log('ymaps.ready');

            var options = {
                tileUrlTemplate: "./%z/tile-%x-%y.jpg",
                controls: {
                    typeControl: false,
                    miniMap: false,
                    toolBar: false,
                    scaleLine: true
                },
                scrollZoomEnabled: true,
                //mapCenter: new YMaps.GeoPoint(37.5872366487953, 55.7339641649376),
                mapCenter: [55.7339641649376, 37.5872366487953],
                //backgroundMapType: ymaps.MapType.MAP,
                mapZoom: 22,
                isTransparent: true,
                smoothZooming: false,
                layerKey: "my#layer",
                mapType: {
                    name: "secondTry",
                    textColor: "#000000"
                },
                copyright: ""
            };
            var map = new ymaps.Map("ymapsID", {
                // Центр карты
                center: options.mapCenter,
                // Коэффициент масштабирования
                zoom: options.mapZoom,
                // Тип карты
                type: "yandex#satellite",
                // controls
                controls: ["rulerControl", "zoomControl", "fullscreenControl"],
            });
            //var myData = new ymaps.TileDataSource(options.tileUrlTemplate, options.isTransparent, options.smoothZooming);

            /////////// VERSION 2 //////////////////////////
            var MQLayer = function () {
                var layer = new ymaps.Layer(options.tileUrlTemplate);
                layer.getCopyrights = function () {
                    return ymaps.vow.resolve('Data, imagery and map information provided by someone');
                };
                // Диапазон доступных масштабов.
                layer.getZoomRange = function () {
                    return ymaps.vow.resolve([18, 22]);
                };
                return layer;
            };
            // Добавим слой под ключом.
            ymaps.layer.storage.add('mq#aerial', MQLayer);

            // МОЖНО РАСШИРЯТЬ ДО БЕСКОНЕЧНОСТИ + кафе и дороги
            //var myMapType = new ymaps.MapType('MQ', ['mq#aerial', 'yandex#skeleton']);

            // ТО ЧТО НУЖНО
            var myMapType = new ymaps.MapType('Vladzavr', ['mq#aerial']);

            // Добавим в хранилище типов карты.
            ymaps.mapType.storage.add('mq_ya#hybrid', myMapType);
            // Теперь мы можем задать наш тип любой карте.
            map.setType('mq_ya#hybrid');

            map.controls.add(new ymaps.control.TypeSelector(['mq_ya#hybrid', 'yandex#map', 'yandex#publicMap', 'yandex#satellite']));
            ////////////////////////////////////////////////



            /////////// VERSION 1 //////////////////////////
            // map.layers.add(new ymaps.Layer(
            //     options.tileUrlTemplate, { } ));
            // map.copyrights.add(options.copyright);
            ////////////////////////////////////////////////
        })

		// ymaps.ready(function () {
        //     var options = {
        //             tileUrlTemplate: "./%z/tile-%x-%y.jpg",
        //             controls: {
        //                 typeControl: false,
        //                 miniMap: false,
        //                 toolBar: false,
        //                 scaleLine: true
        //             },
        //             scrollZoomEnabled: true, 
        //             mapCenter: new YMaps.GeoPoint(37.5872366487953, 55.7339641649376),
        //             backgroundMapType: ymaps.MapType.MAP,
        //             mapZoom: 22,
        //             isTransparent: true,
        //             smoothZooming: false,
        //             layerKey: "my#layer",
        //             mapType: {
        //                 name: "secondTry",
        //                 textColor: "#000000"
        //             },
        //             copyright: ""
        //         },
        //         map = new ymaps.Map(document.getElementById("ymapsID")),
        //         myData = new ymaps.TileDataSource(options.tileUrlTemplate, options.isTransparent, options.smoothZooming);

        //     myData.getTileUrl = function (tile, zoom) {
        //         return this.getTileUrlTemplate().replace(/%x/i, tile.x).replace(/%y/i, tile.y).replace(/%z/i, zoom);
        //     }

        //     var MyLayer = function () {
        //         return new ymaps.Layer(myData);
        //     }
        //     ymaps.Layers.add(options.layerKey, MyLayer);

        //     var mapLayers = options.backgroundMapType ? options.backgroundMapType.getLayers() : [],
        //         myMapType = new ymaps.MapType(ymaps.jQuery.merge(mapLayers, [ options.layerKey ]), options.mapType.name, { textColor: options.mapType.textColor });

        //     map.setCenter(options.mapCenter, options.mapZoom, myMapType);
        //     if (options.copyright) {
        //         map.addCopyright(options.copyright);
        //     }

        //     if (options.controls.typeControl) {
        //         map.addControl(new ymaps.TypeControl([ myMapType, ymaps.MapType.MAP, ymaps.MapType.SATELLITE, ymaps.MapType.HYBRID ], [1, 2, 3]));
        //     }
         
        //     if (options.controls.miniMap) {
        //         map.addControl(new ymaps.MiniMap());
        //     }
        //     if (options.controls.toolBar) {
        //         map.addControl(new ymaps.ToolBar());
        //     }
        //     if (options.controls.scaleLine) {
        //         map.addControl(new ymaps.ScaleLine());
        //     }
        //     if (options.scrollZoomEnabled) {
        //         map.enableScrollZoom();
        //     }
        //     map.addControl(new ymaps.Zoom());
        // });
    </script>
</head>
<body>
    <div id="ymapsID" style="width:600px;height:500px"></div>
</body>
</html>
